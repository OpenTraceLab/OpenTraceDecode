---
title: Initialization
summary: Initializing and shutting down libopentracedecode. 

---

# Initialization

Initializing and shutting down libopentracedecode.  [More...](#detailed-description)

## Functions

|                | Name           |
| -------------- | -------------- |
| int | **[searchpath_add_xdg_dir](Modules/a00087.md#function-searchpath-add-xdg-dir)**(const char * datadir) |
| void | **[print_versions](Modules/a00087.md#function-print-versions)**(void ) |
| int | **[print_searchpaths](Modules/a00087.md#function-print-searchpaths)**(void ) |
| [OTD_API](Files/a00258.md#define-otd-api) int | **[otd_init](Modules/a00087.md#function-otd-init)**(const char * path)<br>Initialize libopentracedecode.  |
| void | **[otd_session_destroy_cb](Modules/a00087.md#function-otd-session-destroy-cb)**(void * arg, void * ignored) |
| [OTD_API](Files/a00258.md#define-otd-api) int | **[otd_exit](Modules/a00087.md#function-otd-exit)**(void )<br>Shutdown libopentracedecode.  |
| [OTD_API](Files/a00258.md#define-otd-api) GSList * | **[otd_searchpaths_get](Modules/a00087.md#function-otd-searchpaths-get)**(void )<br>Return the list of protocol decoder search paths.  |

## Detailed Description

Initializing and shutting down libopentracedecode. 

Before using any of the libopentracedecode functionality, [otd_init()](Modules/a00087.md#function-otd-init) must be called to initialize the library.

When libopentracedecode functionality is no longer needed, [otd_exit()](Modules/a00087.md#function-otd-exit) should be called. 


## Functions Documentation

### function searchpath_add_xdg_dir

```
static int searchpath_add_xdg_dir(
    const char * datadir
)
```


### function print_versions

```
static void print_versions(
    void 
)
```


### function print_searchpaths

```
static int print_searchpaths(
    void 
)
```


### function otd_init

```
OTD_API int otd_init(
    const char * path
)
```

Initialize libopentracedecode. 

**Parameters**: 

  * **path** Path to an extra directory containing protocol decoders which will be added to the Python sys.path. May be NULL.


**Return**: OTD_OK upon success, a (negative) error code otherwise. Upon Python errors, OTD_ERR_PYTHON is returned. If the decoders directory cannot be accessed, OTD_ERR_DECODERS_DIR is returned. If not enough memory could be allocated, OTD_ERR_MALLOC is returned.

**Since**: 0.1.0 

This initializes the Python interpreter, and creates and initializes a "sigrokdecode" Python module.

Then, it searches for sigrok protocol decoders in the "decoders" subdirectory of the the libopentracedecode installation directory. All decoders that are found are loaded into memory and added to an internal list of decoders, which can be queried via [otd_decoder_list()](Modules/a00083.md#function-otd-decoder-list).

The caller is responsible for calling the clean-up function [otd_exit()](Modules/a00087.md#function-otd-exit), which will properly shut down libopentracedecode and free its allocated memory.

Multiple calls to [otd_init()](Modules/a00087.md#function-otd-init), without calling [otd_exit()](Modules/a00087.md#function-otd-exit) in between, are not allowed.


### function otd_session_destroy_cb

```
static void otd_session_destroy_cb(
    void * arg,
    void * ignored
)
```


### function otd_exit

```
OTD_API int otd_exit(
    void 
)
```

Shutdown libopentracedecode. 

**Return**: OTD_OK upon success, a (negative) error code otherwise.

**Since**: 0.1.0 

This frees all the memory allocated for protocol decoders and shuts down the Python interpreter.

This function should only be called if there was a (successful!) invocation of [otd_init()](Modules/a00087.md#function-otd-init) before. Calling this function multiple times in a row, without any successful [otd_init()](Modules/a00087.md#function-otd-init) calls in between, is not allowed.


### function otd_searchpaths_get

```
OTD_API GSList * otd_searchpaths_get(
    void 
)
```

Return the list of protocol decoder search paths. 

**Return**: The list of search paths used when loading protocol decoders.

**Since**: 0.5.1 





-------------------------------

Updated on 2025-09-30 at 08:32:12 +0700