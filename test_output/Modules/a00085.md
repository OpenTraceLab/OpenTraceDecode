---
title: Decoder instances
summary: Decoder instance handling. 

---

# Decoder instances

Decoder instance handling. 

## Functions

|                | Name           |
| -------------- | -------------- |
| void | **[oldpins_array_seed](Modules/a00085.md#function-oldpins-array-seed)**(struct [otd_decoder_inst](Classes/a00113.md) * di) |
| void | **[oldpins_array_free](Modules/a00085.md#function-oldpins-array-free)**(struct [otd_decoder_inst](Classes/a00113.md) * di) |
| [OTD_API](Files/a00258.md#define-otd-api) int | **[otd_inst_option_set](Modules/a00085.md#function-otd-inst-option-set)**(struct [otd_decoder_inst](Classes/a00113.md) * di, GHashTable * options)<br>Set one or more options in a decoder instance.  |
| gint | **[compare_channel_id](Modules/a00085.md#function-compare-channel-id)**(const struct [otd_channel](Classes/a00097.md) * pdch, const char * channel_id) |
| [OTD_API](Files/a00258.md#define-otd-api) int | **[otd_inst_channel_set_all](Modules/a00085.md#function-otd-inst-channel-set-all)**(struct [otd_decoder_inst](Classes/a00113.md) * di, GHashTable * new_channels)<br>Set all channels in a decoder instance.  |
| [OTD_API](Files/a00258.md#define-otd-api) struct [otd_decoder_inst](Classes/a00113.md) * | **[otd_inst_new](Modules/a00085.md#function-otd-inst-new)**(struct [otd_session](Classes/a00165.md) * sess, const char * decoder_id, GHashTable * options)<br>Create a new protocol decoder instance.  |
| void | **[otd_inst_join_decode_thread](Modules/a00085.md#function-otd-inst-join-decode-thread)**(struct [otd_decoder_inst](Classes/a00113.md) * di) |
| void | **[otd_inst_reset_state](Modules/a00085.md#function-otd-inst-reset-state)**(struct [otd_decoder_inst](Classes/a00113.md) * di) |
| [OTD_API](Files/a00258.md#define-otd-api) int | **[otd_inst_stack](Modules/a00085.md#function-otd-inst-stack)**(struct [otd_session](Classes/a00165.md) * sess, struct [otd_decoder_inst](Classes/a00113.md) * di_bottom, struct [otd_decoder_inst](Classes/a00113.md) * di_top)<br>Stack a decoder instance on top of another.  |
| struct [otd_decoder_inst](Classes/a00113.md) * | **[otd_inst_find_by_id_stack](Modules/a00085.md#function-otd-inst-find-by-id-stack)**(const char * inst_id, struct [otd_decoder_inst](Classes/a00113.md) * stack)<br>Search a decoder instance and its stack for instance ID.  |
| [OTD_API](Files/a00258.md#define-otd-api) struct [otd_decoder_inst](Classes/a00113.md) * | **[otd_inst_find_by_id](Modules/a00085.md#function-otd-inst-find-by-id)**(struct [otd_session](Classes/a00165.md) * sess, const char * inst_id)<br>Find a decoder instance by its instance ID.  |
| [OTD_API](Files/a00258.md#define-otd-api) int | **[otd_inst_initial_pins_set_all](Modules/a00085.md#function-otd-inst-initial-pins-set-all)**(struct [otd_decoder_inst](Classes/a00113.md) * di, GArray * initial_pins)<br>Set the list of initial (assumed) pin values.  |
| gboolean | **[have_non_null_conds](Modules/a00085.md#function-have-non-null-conds)**(const struct [otd_decoder_inst](Classes/a00113.md) * di) |
| void | **[update_old_pins_array](Modules/a00085.md#function-update-old-pins-array)**(struct [otd_decoder_inst](Classes/a00113.md) * di, const uint8_t * sample_pos) |
| void | **[update_old_pins_array_initial_pins](Modules/a00085.md#function-update-old-pins-array-initial-pins)**(struct [otd_decoder_inst](Classes/a00113.md) * di) |
| gboolean | **[term_matches](Modules/a00085.md#function-term-matches)**(const struct [otd_decoder_inst](Classes/a00113.md) * di, struct [otd_term](Classes/a00157.md) * term, const uint8_t * sample_pos) |
| gboolean | **[all_terms_match](Modules/a00085.md#function-all-terms-match)**(const struct [otd_decoder_inst](Classes/a00113.md) * di, const GSList * cond, const uint8_t * sample_pos) |
| gboolean | **[at_least_one_condition_matched](Modules/a00085.md#function-at-least-one-condition-matched)**(const struct [otd_decoder_inst](Classes/a00113.md) * di, unsigned int num_conditions) |
| gboolean | **[find_match](Modules/a00085.md#function-find-match)**(struct [otd_decoder_inst](Classes/a00113.md) * di) |
| gpointer | **[di_thread](Modules/a00085.md#function-di-thread)**(gpointer data)<br>Worker thread (per PD-stack).  |


## Functions Documentation

### function oldpins_array_seed

```
static void oldpins_array_seed(
    struct otd_decoder_inst * di
)
```


### function oldpins_array_free

```
static void oldpins_array_free(
    struct otd_decoder_inst * di
)
```


### function otd_inst_option_set

```
OTD_API int otd_inst_option_set(
    struct otd_decoder_inst * di,
    GHashTable * options
)
```

Set one or more options in a decoder instance. 

**Parameters**: 

  * **di** Decoder instance. 
  * **options** A GHashTable of options to set.


**Return**: OTD_OK upon success, a (negative) error code otherwise.

**Since**: 0.1.0 

Handled options are removed from the hash.


### function compare_channel_id

```
static gint compare_channel_id(
    const struct otd_channel * pdch,
    const char * channel_id
)
```


### function otd_inst_channel_set_all

```
OTD_API int otd_inst_channel_set_all(
    struct otd_decoder_inst * di,
    GHashTable * new_channels
)
```

Set all channels in a decoder instance. 

**Parameters**: 

  * **di** Decoder instance. 
  * **new_channels** A GHashTable of channels to set. Key is channel name, value is the channel number. Samples passed to this instance will be arranged in this order.


**Return**: OTD_OK upon success, a (negative) error code otherwise.

**Since**: 0.4.0 

This function sets _all_ channels for the specified decoder instance, i.e., it overwrites any channels that were already defined (if any).


### function otd_inst_new

```
OTD_API struct otd_decoder_inst * otd_inst_new(
    struct otd_session * sess,
    const char * decoder_id,
    GHashTable * options
)
```

Create a new protocol decoder instance. 

**Parameters**: 

  * **sess** The session holding the protocol decoder instance. Must not be NULL. 
  * **decoder_id** Decoder 'id' field. 
  * **options** GHashtable of options which override the defaults set in the decoder class. May be NULL.


**Return**: Pointer to a newly allocated struct [otd_decoder_inst](Classes/a00113.md), or NULL in case of failure.

**Since**: 0.3.0 

### function otd_inst_join_decode_thread

```
static void otd_inst_join_decode_thread(
    struct otd_decoder_inst * di
)
```


### function otd_inst_reset_state

```
static void otd_inst_reset_state(
    struct otd_decoder_inst * di
)
```


### function otd_inst_stack

```
OTD_API int otd_inst_stack(
    struct otd_session * sess,
    struct otd_decoder_inst * di_bottom,
    struct otd_decoder_inst * di_top
)
```

Stack a decoder instance on top of another. 

**Parameters**: 

  * **sess** The session holding the protocol decoder instances. Must not be NULL. 
  * **di_bottom** The instance on top of which di_top will be stacked. 
  * **di_top** The instance to go on top.


**Return**: OTD_OK upon success, a (negative) error code otherwise.

**Since**: 0.3.0 

### function otd_inst_find_by_id_stack

```
static struct otd_decoder_inst * otd_inst_find_by_id_stack(
    const char * inst_id,
    struct otd_decoder_inst * stack
)
```

Search a decoder instance and its stack for instance ID. 

**Parameters**: 

  * **inst_id** ID to search for. 
  * **stack** A decoder instance, potentially with stacked instances.


**Return**: The matching instance, or NULL. 

### function otd_inst_find_by_id

```
OTD_API struct otd_decoder_inst * otd_inst_find_by_id(
    struct otd_session * sess,
    const char * inst_id
)
```

Find a decoder instance by its instance ID. 

**Parameters**: 

  * **sess** The session holding the protocol decoder instance. Must not be NULL. 
  * **inst_id** The instance ID to be found.


**Return**: Pointer to struct [otd_decoder_inst](Classes/a00113.md), or NULL if not found.

**Since**: 0.3.0 

This will recurse to find the instance anywhere in the stack tree of the given session.


### function otd_inst_initial_pins_set_all

```
OTD_API int otd_inst_initial_pins_set_all(
    struct otd_decoder_inst * di,
    GArray * initial_pins
)
```

Set the list of initial (assumed) pin values. 

**Parameters**: 

  * **di** Decoder instance to use. Must not be NULL. 
  * **initial_pins** A GArray of uint8_t values. Must not be NULL.


**Since**: 0.5.0 

### function have_non_null_conds

```
static gboolean have_non_null_conds(
    const struct otd_decoder_inst * di
)
```


### function update_old_pins_array

```
static void update_old_pins_array(
    struct otd_decoder_inst * di,
    const uint8_t * sample_pos
)
```


### function update_old_pins_array_initial_pins

```
static void update_old_pins_array_initial_pins(
    struct otd_decoder_inst * di
)
```


### function term_matches

```
static gboolean term_matches(
    const struct otd_decoder_inst * di,
    struct otd_term * term,
    const uint8_t * sample_pos
)
```


### function all_terms_match

```
static gboolean all_terms_match(
    const struct otd_decoder_inst * di,
    const GSList * cond,
    const uint8_t * sample_pos
)
```


### function at_least_one_condition_matched

```
static gboolean at_least_one_condition_matched(
    const struct otd_decoder_inst * di,
    unsigned int num_conditions
)
```


### function find_match

```
static gboolean find_match(
    struct otd_decoder_inst * di
)
```


### function di_thread

```
static gpointer di_thread(
    gpointer data
)
```

Worker thread (per PD-stack). 

**Parameters**: 

  * **data** Pointer to the lowest-level PD's device instance. Must not be NULL.


**Return**: NULL if there was an error. 





-------------------------------

Updated on 2025-09-30 at 08:32:12 +0700